// Generated by CoffeeScript 1.6.3
(function(){window.Library=function(){function e(){var e=this;this.keyCodes=[37,39,38,40];this.current_section=$(".library-navigation ul > li:first a").attr("href");this.bindArrows();$.when(this.buildSections()).done(function(){return e.loadHighlight()});$(".library-navigation .expander").click(function(){return $(".library-navigation").toggleClass("expanded")});$(".library-code-switch").click(function(){return $(".library-content").toggleClass("no-code")});$(".library-navigation ul li a").click(function(t){t.preventDefault();return e.scrollToElement($(t.currentTarget).attr("href"))})}e.prototype.bindArrows=function(){var e=this;return $("body").keydown(function(t){e.keyCodes.indexOf(t.keyCoe)!==-1&&t.preventDefault();switch(t.keyCode){case 37:return $(".library-navigation").toggleClass("expanded");case 39:return $(".library-content").toggleClass("no-code");case 38:return e.scrollToPrevious();case 40:return e.scrollToNext()}})};e.prototype.buildSections=function(){var e=this;return $(".library-section").each(function(t,n){var r;r=e.htmlClean($(n).html());e.setupSection(n,r,$(n).data("label"));if($(n).data("code")!==!1)return e.codeSample(n,r)})};e.prototype.setupSection=function(e,t,n){$(e).html("<div class='library-preview'>");$(e).find(".library-preview").html(t);return $(e).prepend("<span class='library-section-label'>"+n+"</span>")};e.prototype.codeSample=function(e,t){$(e).append("</div><div class='library-code'></div>");$(e).find(".library-code").html("<pre><code></code></pre>");$(e).find(".library-code pre code").text(t);if($(e).data("code")===!1)return $(e).find(".library-code pre").css("visibility","hidden")};e.prototype.loadHighlight=function(){return $.getScript("http://yandex.st/highlightjs/7.3/highlight.min.js",function(){hljs.tabReplace="  ";return hljs.initHighlightingOnLoad()})};e.prototype.scrollToPrevious=function(){var e;e=$("a[href='"+this.current_section+"']",".library-navigation").parent("li").prev();if(e.length!==0)return this.scrollToElement($(e).find("a").attr("href"))};e.prototype.scrollToNext=function(){var e;e=$("a[href='"+this.current_section+"']",".library-navigation").parent("li").next();if(e.length!==0)return this.scrollToElement($(e).find("a").attr("href"))};e.prototype.scrollToElement=function(e){this.current_section=e;$("html, body").animate({scrollTop:$(e).offset().top},800);$(".library-navigation ul li a").removeClass("active");return $("a[href='"+this.current_section+"']",".library-navigation").addClass("active")};e.prototype.htmlClean=function(e){var t,n,r,i,s,o;e=e.replace(/(\r\n|\n|\r)/,"");n=e.substr(0,e.indexOf("<"));t=e.split(/(\r\n|\n|\r)/g);i=[];for(s=0,o=t.length;s<o;s++){r=t[s];i.push(r.replace(n,""))}return i.join("").trim()};return e}();$(function(){return window.library=new Library})}).call(this);